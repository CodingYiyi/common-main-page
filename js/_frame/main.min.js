"use strict";!function(e){e.extend({KYEE_MAIN_INIT:function(t){function i(t){E=t,s(),n("KyeeNext-func-item-temp","KyeeNext-func-items-box","KyeeNext-func-item-"),a("KyeeNext-menu-item-temp","KyeeNext-menu-items-box","KyeeNext-menu-item-"),E.CUSTOMER_SERVICES_CONFIG.SHOW_CUSTOMER_SERVICES&&E.CUSTOMER_SERVICES_CONFIG.CUSTOMER_SERVICES.length>0&&(e("#KyeeNext-customer-services-box").fadeIn(300),l("KyeeNext-customer-services-item-temp","KyeeNext-customer-services-box","KyeeNext-service-itemd-")),E.TOGGLE_SYS_CONFIG.CAN_TOGGLE_SYS&&E.TOGGLE_SYS_CONFIG.SYS_LIST.length>0&&(e(".KyeeNext-system-name-box>i").show(),r("KyeeNext-toggle-system-temp","KyeeNext-toggle-system-items-box","KyeeNext-system-item-")),E.SHOW_RECENT_FUNC&&(e(".KyeeNext-visited-nav-box").fadeIn(300),e(".KyeeNext-main-body-box").removeClass("KyeeNext-hide-recent-func-tabbar"))}function s(){0===t.platform&&(e("title")[0].innerHTML=E.PRO_TITLE,e("link[rel='icon']").attr("href",E.PRO_FAVICON)),e("#KyeeNext-pro-logo").attr("src",E.PRO_LOGO),e("#KyeeNext-system-name")[0].innerHTML=E.PRO_NAME}function n(t,i,s){for(var n=e("#"+t),a="",l=0,r=E.TOOL_BARS.length;l<r;l++){var o=E.TOOL_BARS[l];if(o.USE_TEMPLATE)a+=o.TEMPLATE;else{var N=n.clone().attr("id",s+o.TOOL_ID).removeAttr("style");o.BIND_FUNC&&v("KyeeNext-func-items-box",s+o.TOOL_ID,o.EVENT_FUNCS),N.children("i").addClass(o.TOOL_ICON),N.children("span")[0].innerHTML=o.TOOL_LABEL,a+=N[0].outerHTML}}e(a).appendTo(e("#"+i))}function a(t,i,s){for(var n=e("#"+t+" .KyeeNext-item-level-0"),a=e("#"+t+" .KyeeNext-item-level-1"),l=e("#"+t+" .KyeeNext-item-level-2"),r="",o="",N=0,x=E.ASIDE_MENU_ITEMS.length;N<x;N++){var m="",c=E.ASIDE_MENU_ITEMS[N],y=n.clone().attr("id",s+c.MENU_ID);if(y.children(".KyeeNext-item-icon-left").addClass(c.MENU_ICON),y.children("span")[0].innerHTML=c.MENU_LABEL,c.ROUTER_LINK&&!c.BIND_FUNC?(y.addClass("kyee-router-link-flag"),y.attr("data-router-link",c.ROUTER_LINK)):c.BIND_FUNC&&v("KyeeNext-menu-items-box",s+c.MENU_ID,c.EVENT_FUNCS),c.KYEE_DATA&&y.attr(c.KYEE_DATA),c.AUTO_CHECKED&&(o=s+c.MENU_ID),c.CHILDREN_ITEMS&&c.CHILDREN_ITEMS.length>0){for(var K="",u=0,h=c.CHILDREN_ITEMS.length;u<h;u++){var C=c.CHILDREN_ITEMS[u],f=a.clone().attr("id",s+C.MENU_ID);if(f.children("span")[0].innerHTML=C.MENU_LABEL,C.ROUTER_LINK&&!C.BIND_FUNC?(f.addClass("kyee-router-link-flag"),f.attr("data-router-link",C.ROUTER_LINK)):C.BIND_FUNC&&v("KyeeNext-menu-items-box",s+C.MENU_ID,C.EVENT_FUNCS),C.KYEE_DATA&&f.attr(C.KYEE_DATA),C.AUTO_CHECKED&&(o=s+C.MENU_ID),C.CHILDREN_ITEMS&&C.CHILDREN_ITEMS.length>0){var _="";f.children("i").addClass("kyeenext-icon-add");for(var T=0,I=C.CHILDREN_ITEMS.length;T<I;T++){var g=C.CHILDREN_ITEMS[T],S=l.clone().attr("id",s+g.MENU_ID);g.ROUTER_LINK&&!g.BIND_FUNC?(S.addClass("kyee-router-link-flag"),S.attr("data-router-link",g.ROUTER_LINK)):g.BIND_FUNC&&v("KyeeNext-menu-items-box",s+g.MENU_ID,g.EVENT_FUNCS),g.KYEE_DATA&&S.attr(g.KYEE_DATA),S[0].innerHTML=g.MENU_LABEL,_+=S[0].outerHTML,g.AUTO_CHECKED&&(o=s+g.MENU_ID)}_='<ul class="KyeeNext-submenu-hide">'+_+"</ul>",K+="<li>"+f[0].outerHTML+_+"</li>"}else K+="<li>"+f[0].outerHTML+"</li>"}m='<ul class="KyeeNext-submenu-hide">'+K+"</ul>"}r+='<li class="KyeeNext-item-level-0-folded">'+y[0].outerHTML+m+"</li>"}e(r).appendTo(e("#"+i)),o&&d(o)}function l(t,i,s){for(var n=e("#"+t),a="",l=0,r=E.CUSTOMER_SERVICES_CONFIG.CUSTOMER_SERVICES.length;l<r;l++){var o=E.CUSTOMER_SERVICES_CONFIG.CUSTOMER_SERVICES[l],N=n.clone().attr("id",s+o.ITEM_ID);N.children("span")[0].innerHTML=o.ITEM_LABEL,N.children("i").addClass(o.ITEM_ICON),a+=N[0].outerHTML}e(a).insertBefore("#KyeeNext-customer-services-toggle-btn")}function r(t,i,s){for(var n=e("#"+t),a="",l=0,r=E.TOGGLE_SYS_CONFIG.SYS_LIST.length;l<r;l++){var o=E.TOGGLE_SYS_CONFIG.SYS_LIST[l],N=n.clone().attr("id",s+o.SYS_ID).css("display","block");o.BIND_FUNC?v("KyeeNext-toggle-system-items-box",s+o.SYS_ID,o.EVENT_FUNCS):e("#KyeeNext-toggle-system-items-box").on("click","#"+s+o.SYS_ID,function(){window.location.href=o.SYS_HREF}),N.children("i").addClass(o.SYS_ICON),N.children("span")[0].innerHTML=o.SYS_LABEL,a+=N[0].outerHTML}e(a).appendTo("#"+i),e(".KyeeNext-system-name-box").on("mouseenter",function(){e(".KyeeNext-toggle-system-box").delay(600).fadeIn(100)}),e(".KyeeNext-system-name-box").on("mouseleave",function(){e(".KyeeNext-toggle-system-box").clearQueue()}),e(".KyeeNext-toggle-system-box").on("mouseleave",function(){e(this).fadeOut(100)})}function o(){e(".KyeeNext-aside-box").toggleClass("KyeeNext-aside-folded"),u(e("#KyeeNext-toggle-aside"),"kyeenext-icon-menu-s","kyeenext-icon-menu"),e(".KyeeNext-aside-box").off("mouseout").one("mouseout",function(){e(".KyeeNext-aside-box").hasClass("KyeeNext-aside-folded")&&(u(e(".KyeeNext-main-box"),"KyeeNext-main-box-fixed","KyeeNext-main-box-dynamic"),e(".KyeeNext-aside-box").addClass("KyeeNext-aside-box-hover"))}),e(".KyeeNext-aside-box").hasClass("KyeeNext-aside-box-hover")&&(u(e(".KyeeNext-main-box"),"KyeeNext-main-box-fixed","KyeeNext-main-box-dynamic"),e(".KyeeNext-aside-box").removeClass("KyeeNext-aside-box-hover"))}function N(i){e(".KyeeNext-item-level-1-2-active").removeClass("KyeeNext-item-level-1-2-active"),e(".KyeeNext-item-level-0-active").removeClass("KyeeNext-item-level-0-active"),i.hasClass("KyeeNext-item-level-0")?i.addClass("KyeeNext-item-level-0-active"):i.addClass("KyeeNext-item-level-1-2-active"),0==t.platform?e("#KyeeNext-workspace-iframe").attr("src",i.attr("data-router-link")):1==t.platform&&t.goToFunc(i.attr("data-router-link"))}function d(i){if(i instanceof jQuery)var s=i;else if("string"==typeof i)var s=e("#"+i);else var s=e(i);e(".KyeeNext-item-level-1-2-active").removeClass("KyeeNext-item-level-1-2-active"),e(".KyeeNext-item-level-0-active").removeClass("KyeeNext-item-level-0-active"),e(".KyeeNext-menu-items-box").children(".KyeeNext-item-level-0-expanded").each(function(){this!=s.parents("li[class^='KyeeNext-item-level-0-']")[0]&&(e(this).removeClass("KyeeNext-item-level-0-expanded").addClass("KyeeNext-item-level-0-folded"),e(this).children("ul").length>0&&(e(this).children("ul").removeClass("KyeeNext-submenu-show").addClass("KyeeNext-submenu-hide"),e(this).children(".KyeeNext-item-level-0").children(".KyeeNext-item-icon-right").removeClass("KyeeNext-item-icon-right-expanded").addClass("KyeeNext-item-icon-right-folded")))}),s.hasClass("KyeeNext-item-level-0")?s.addClass("KyeeNext-item-level-0-active"):s.hasClass("KyeeNext-item-level-1")?(s.parents(".KyeeNext-item-level-0-folded").removeClass("KyeeNext-item-level-0-folded").addClass("KyeeNext-item-level-0-expanded").find("i.KyeeNext-item-icon-right").removeClass("KyeeNext-item-icon-right-folded").addClass("KyeeNext-item-icon-right-expanded"),s.parents(".KyeeNext-submenu-hide").removeClass("KyeeNext-submenu-hide").addClass("KyeeNext-submenu-show"),s.addClass("KyeeNext-item-level-1-2-active")):s.hasClass("KyeeNext-item-level-2")&&(s.parents(".KyeeNext-item-level-0-folded").removeClass("KyeeNext-item-level-0-folded").addClass("KyeeNext-item-level-0-expanded").find("i.KyeeNext-item-icon-right").removeClass("KyeeNext-item-icon-right-folded").addClass("KyeeNext-item-icon-right-expanded"),s.parents(".KyeeNext-submenu-hide").removeClass("KyeeNext-submenu-hide").addClass("KyeeNext-submenu-show"),s.parent().prev().children("i").removeClass("kyeenext-icon-add").addClass("kyeenext-icon-reduce"),s.addClass("KyeeNext-item-level-1-2-active")),x({MENU_ID:s.attr("id").substring(19),MENU_LABEL:s.children("span")[0]?s.children("span")[0].innerHTML:s[0].innerHTML}),0==t.platform?e("#KyeeNext-workspace-iframe").attr("src",s.attr("data-router-link")):1==t.platform&&t.goToFunc(s.attr("data-router-link"))}function x(t){if(E.SHOW_RECENT_FUNC){if(c(C,{MENU_ID:t.MENU_ID})<0){C.push(t),e("#KyeeNext-visited-items").children("li").removeClass("KyeeNext-active-item");var i=e("#KyeeNext-visited-item-temp").clone().attr("id","KyeeNext-visited-item-"+t.MENU_ID).css("display","inline-block");i.children("span")[0].innerHTML=t.MENU_LABEL,i.appendTo(e("#KyeeNext-visited-items"))}else e("#KyeeNext-visited-item-"+t.MENU_ID).hasClass("KyeeNext-active-item")||(e("#KyeeNext-visited-items").children("li").removeClass("KyeeNext-active-item"),e("#KyeeNext-visited-item-"+t.MENU_ID).addClass("KyeeNext-active-item"));y(e("#KyeeNext-visited-item-"+t.MENU_ID)[0])}}function m(t,i){var s,n=c(C,{MENU_ID:t});i.hasClass("KyeeNext-active-item")?n==C.length-1&&C.length>1?(e("#KyeeNext-visited-item-"+C[n-1].MENU_ID).addClass("KyeeNext-active-item"),s=e("#KyeeNext-menu-item-"+C[n-1].MENU_ID),d(s)):0==n&&1==C.length?e(".KyeeNext-item-level-1-2-active").removeClass("KyeeNext-item-level-1-2-active"):n<C.length-1&&(e("#KyeeNext-visited-item-"+C[n+1].MENU_ID).addClass("KyeeNext-active-item"),s=e("#KyeeNext-menu-item-"+C[n+1].MENU_ID),d(s)):s=e("#KyeeNext-visited-items>.KyeeNext-active-item"),n>-1&&(C.splice(n,1),s&&y(s))}function c(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];for(var s in e){s=+s;var n=e[s];if(t instanceof Object){var a=!0;for(var l in t){var r=t[l];if(n[l]==r&&!i)return s;if(i&&n[l]!=r){a=!1;break}}if(a)return s}else if(n==t)return s}return-1}function y(t){t instanceof jQuery&&(t=t[0]);var i=t.offsetLeft,s=t.offsetWidth,n=e("#KyeeNext-visited-items"),a=n.css("transform")&&"none"!==n.css("transform")?+n.css("transform").substring(7).split(",")[4]:0,l=n.outerWidth();i>=-a&&i+s<=l-a||(i<-a?n.css({transform:"translateX("+(60-i<0?60-i:0)+"px)"}):i+s>l-a&&n.css({transform:"translateX("+(l-i-s-80<0?l-i-s-80:0)+"px)"}))}function K(){for(var t=0,i=e("#KyeeNext-visited-items>li"),s=0,n=i.length;s<n;s++)t+=i[s].offsetWidth;return t}function u(e,t,i){e.hasClass(t)?e.removeClass(t).addClass(i):e.hasClass(i)&&e.removeClass(i).addClass(t)}function v(t,i,s){if(s&&s.length>0)for(var n=0,a=s.length;n<a;n++)e("#"+t).on(s[n].EVENT_NAME,"#"+i,s[n].EVENT_FUNC)}var h={platform:0,goToFunc:null};t=e.extend({},h,t);var E,C=[];return e("#KyeeNext-toggle-aside").on("click",function(){o()}),e("#KyeeNext-menu-items-box").on("click",".KyeeNext-item-level-0",function(){var t=this;e(".KyeeNext-menu-items-box").children(".KyeeNext-item-level-0-expanded").each(function(){e(t).parent()[0]!=this&&(e(this).removeClass("KyeeNext-item-level-0-expanded").addClass("KyeeNext-item-level-0-folded"),e(this).children("ul").length>0&&(e(this).children("ul").removeClass("KyeeNext-submenu-show").addClass("KyeeNext-submenu-hide"),e(this).children(".KyeeNext-item-level-0").children(".KyeeNext-item-icon-right").removeClass("KyeeNext-item-icon-right-expanded").addClass("KyeeNext-item-icon-right-folded")))}),e(this).parent().children("ul").length>0&&(u(e(this).parent(),"KyeeNext-item-level-0-expanded","KyeeNext-item-level-0-folded"),u(e(this).parent().children("ul"),"KyeeNext-submenu-show","KyeeNext-submenu-hide"),u(e(this).children(".KyeeNext-item-icon-right"),"KyeeNext-item-icon-right-folded","KyeeNext-item-icon-right-expanded")),e(this).hasClass("kyee-router-link-flag")&&(x({MENU_ID:e(this).attr("id").substring(19),MENU_LABEL:e(this).children("span")[0].innerHTML}),N(e(this)))}),e("#KyeeNext-menu-items-box").on("click",".KyeeNext-item-level-1",function(){e(this).parent().children("ul").length>0&&(u(e(this).parent().children("ul"),"KyeeNext-submenu-show","KyeeNext-submenu-hide"),u(e(this).children("i"),"kyeenext-icon-reduce","kyeenext-icon-add")),e(this).hasClass("kyee-router-link-flag")&&(x({MENU_ID:e(this).attr("id").substring(19),MENU_LABEL:e(this).children("span")[0].innerHTML}),N(e(this)))}),e("#KyeeNext-menu-items-box").on("click",".KyeeNext-item-level-2",function(){e(this).hasClass("kyee-router-link-flag")&&(x({MENU_ID:e(this).attr("id").substring(19),MENU_LABEL:e(this)[0].innerHTML}),N(e(this)))}),e("#KyeeNext-visited-items").on("click","li",function(){var t=e(this).attr("id").substring(22),i="KyeeNext-menu-item-"+t;e("#"+i).hasClass("KyeeNext-item-level-1-2-active")||d(i)}),e("#KyeeNext-visited-items").on("click","li>i",function(t){e(this).parent().remove(),m(e(this).parent().attr("id").substring(22),e(this).parent()),t.stopPropagation()}),e(".KyeeNext-nav-pre").on("click",function(){var t=e("#KyeeNext-visited-items"),i=t.css("transform")&&"none"!==t.css("transform")?+t.css("transform").substring(7).split(",")[4]:0;i>t.outerWidth()-K()&&t.css({transform:"translateX("+(i-E.SCROLL_STEP)+"px)"})}),e(".KyeeNext-nav-next").on("click",function(){var t=e("#KyeeNext-visited-items"),i=t.css("transform")&&"none"!==t.css("transform")?+t.css("transform").substring(7).split(",")[4]:0;i<0&&t.css({transform:"translateX("+(i+E.SCROLL_STEP<=0?i+E.SCROLL_STEP:0)+"px)"})}),e("#KyeeNext-customer-services-toggle-btn").on("click",function(){e(this).toggleClass("KyeeNext-customer-services-expanded"),e(".KyeeNext-customer-services-item:not(#KyeeNext-customer-services-item-temp)").fadeToggle("fast"),u(e(this).children("i"),"kyeenext-icon-add","kyeenext-icon-reduce")}),e(".KyeeNext-ui-sidebar-mask").on("click",function(){e(".KyeeNext-sidebar-right").removeClass("KyeeNext-sidebar-show").addClass("KyeeNext-sidebar-hidden"),e(".KyeeNext-ui-sidebar-mask").fadeOut(200)}),{init:i,expandedTarget:d}}})}(jQuery);