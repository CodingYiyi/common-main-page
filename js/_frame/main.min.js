(function(L){L.extend({KYEE_MAIN_INIT:function(i){var e={platform:0,goToFunc:null};i=L.extend({},e,i);var a=[];var I;function t(e){I=e;s();n("KyeeNext-func-item-temp","KyeeNext-func-items-box","KyeeNext-func-item-");l("KyeeNext-menu-item-temp","KyeeNext-menu-items-box","KyeeNext-menu-item-");if(I.CUSTOMER_SERVICES_CONFIG.SHOW_CUSTOMER_SERVICES&&I.CUSTOMER_SERVICES_CONFIG.CUSTOMER_SERVICES.length>0){L("#KyeeNext-customer-services-box").fadeIn(300);r("KyeeNext-customer-services-item-temp","KyeeNext-customer-services-box","KyeeNext-service-itemd-")}if(I.TOGGLE_SYS_CONFIG.CAN_TOGGLE_SYS&&I.TOGGLE_SYS_CONFIG.SYS_LIST.length>0){L(".KyeeNext-system-name-box>i").show();o("KyeeNext-toggle-system-temp","KyeeNext-toggle-system-items-box","KyeeNext-system-item-")}if(I.SHOW_RECENT_FUNC){L(".KyeeNext-visited-nav-box").fadeIn(300);L(".KyeeNext-main-body-box").removeClass("KyeeNext-hide-recent-func-tabbar")}if(I.COPYRIGHT_CONFIG&&I.COPYRIGHT_CONFIG.SHOW_COPYRIGHT){L(".KyeeNext-copyright-box").css("display","block")[0].innerHTML=I.COPYRIGHT_CONFIG.COPYRIGHT_DETAIL;L(".KyeeNext-main-body-box").css("bottom","40px")}}function s(){if(i.platform===0){L("title")[0].innerHTML=I.PRO_TITLE;L("link[rel='icon']").attr("href",I.PRO_FAVICON)}L("#KyeeNext-pro-logo").attr("src",I.PRO_LOGO);L("#KyeeNext-system-name")[0].innerHTML=I.PRO_NAME}function n(e,t,i){var s=L("#"+e);var a="";for(var n=0,l=I.TOOL_BARS.length;n<l;n++){var r=I.TOOL_BARS[n];if(!r.HIDDEN){if(!r.USE_TEMPLATE){var o=s.clone().attr("id",i+r.TOOL_ID).removeAttr("style");r.BIND_FUNC&&g("KyeeNext-func-items-box",i+r.TOOL_ID,r.EVENT_FUNCS);o.children("i").addClass(r.TOOL_ICON);o.children("span")[0].innerHTML=r.TOOL_LABEL;a+=o[0].outerHTML}else{a+=r.TEMPLATE}}}L(a).appendTo(L("#"+t))}function l(e,t,i){var s=L("#"+e+" .KyeeNext-item-level-0");var a=L("#"+e+" .KyeeNext-item-level-1");var n=L("#"+e+" .KyeeNext-item-level-2");var l="";var r="";for(var o=0,N=I.ASIDE_MENU_ITEMS.length;o<N;o++){var d="";var x=I.ASIDE_MENU_ITEMS[o];var m=s.clone().attr("id",i+x.MENU_ID);m.children(".KyeeNext-item-icon-left").addClass(x.MENU_ICON);m.children("span")[0].innerHTML=x.MENU_LABEL;if(x.ROUTER_LINK&&!x.BIND_FUNC){m.addClass("kyee-router-link-flag");m.attr("data-router-link",x.ROUTER_LINK)}else if(x.BIND_FUNC){g("KyeeNext-menu-items-box",i+x.MENU_ID,x.EVENT_FUNCS)}x.KYEE_DATA&&m.attr(x.KYEE_DATA);x.AUTO_CHECKED&&(r=i+x.MENU_ID);if(x.CHILDREN_ITEMS&&x.CHILDREN_ITEMS.length>0){var c="";for(var y=0,v=x.CHILDREN_ITEMS.length;y<v;y++){var K=x.CHILDREN_ITEMS[y];var f=a.clone().attr("id",i+K.MENU_ID);f.children("span").attr("title",K.MENU_LABEL)[0].innerHTML=K.MENU_LABEL;if(K.ROUTER_LINK&&!K.BIND_FUNC){f.addClass("kyee-router-link-flag");f.attr("data-router-link",K.ROUTER_LINK)}else if(K.BIND_FUNC){g("KyeeNext-menu-items-box",i+K.MENU_ID,K.EVENT_FUNCS)}K.KYEE_DATA&&f.attr(K.KYEE_DATA);K.AUTO_CHECKED&&(r=i+K.MENU_ID);if(K.CHILDREN_ITEMS&&K.CHILDREN_ITEMS.length>0){var u="";f.children("i").addClass("kyeenext-icon-add");for(var E=0,h=K.CHILDREN_ITEMS.length;E<h;E++){var C=K.CHILDREN_ITEMS[E];var _=n.clone().attr("id",i+C.MENU_ID);if(C.ROUTER_LINK&&!C.BIND_FUNC){_.addClass("kyee-router-link-flag");_.attr("data-router-link",C.ROUTER_LINK)}else if(C.BIND_FUNC){g("KyeeNext-menu-items-box",i+C.MENU_ID,C.EVENT_FUNCS)}C.KYEE_DATA&&_.attr(C.KYEE_DATA);_.attr("title",C.MENU_LABEL)[0].innerHTML=C.MENU_LABEL;u+=_[0].outerHTML;C.AUTO_CHECKED&&(r=i+C.MENU_ID)}u='<ul class="KyeeNext-submenu-hide">'+u+"</ul>";c+="<li>"+f[0].outerHTML+u+"</li>"}else{c+="<li>"+f[0].outerHTML+"</li>"}}d='<ul class="KyeeNext-submenu-hide">'+c+"</ul>"}l+='<li class="KyeeNext-item-level-0-folded">'+m[0].outerHTML+d+"</li>"}L(l).appendTo(L("#"+t));r&&T(r)}function r(e,t,i){var s=L("#"+e);var a="";for(var n=0,l=I.CUSTOMER_SERVICES_CONFIG.CUSTOMER_SERVICES.length;n<l;n++){var r=I.CUSTOMER_SERVICES_CONFIG.CUSTOMER_SERVICES[n];var o=s.clone().attr("id",i+r.ITEM_ID);o.children("span")[0].innerHTML=r.ITEM_LABEL;o.children("i").addClass(r.ITEM_ICON);a+=o[0].outerHTML}L(a).insertBefore("#KyeeNext-customer-services-toggle-btn")}function o(e,t,i){var s=L("#"+e);var a="";for(var n=0,l=I.TOGGLE_SYS_CONFIG.SYS_LIST.length;n<l;n++){var r=I.TOGGLE_SYS_CONFIG.SYS_LIST[n];var o=s.clone().attr("id",i+r.SYS_ID).css("display","block");if(r.BIND_FUNC){g("KyeeNext-toggle-system-items-box",i+r.SYS_ID,r.EVENT_FUNCS)}else{L("#KyeeNext-toggle-system-items-box").on("click","#"+i+r.SYS_ID,function(){window.location.href=r.SYS_HREF})}o.children("i").addClass(r.SYS_ICON);o.children("span")[0].innerHTML=r.SYS_LABEL;a+=o[0].outerHTML}L(a).appendTo("#"+t);L(".KyeeNext-system-name-box").on("mouseenter",function(){L(".KyeeNext-toggle-system-box").delay(600).fadeIn(100)});L(".KyeeNext-system-name-box").on("mouseleave",function(){L(".KyeeNext-toggle-system-box").clearQueue()});L(".KyeeNext-toggle-system-box").on("mouseleave",function(){L(this).fadeOut(100)})}L("#KyeeNext-toggle-aside").on("click",function(){N()});function N(){L(".KyeeNext-aside-box").toggleClass("KyeeNext-aside-folded");K(L("#KyeeNext-toggle-aside"),"kyeenext-icon-menu-s","kyeenext-icon-menu");L(".KyeeNext-aside-box").off("mouseout").one("mouseout",function(){if(L(".KyeeNext-aside-box").hasClass("KyeeNext-aside-folded")){K(L(".KyeeNext-main-box"),"KyeeNext-main-box-fixed","KyeeNext-main-box-dynamic");L(".KyeeNext-aside-box").addClass("KyeeNext-aside-box-hover")}});if(L(".KyeeNext-aside-box").hasClass("KyeeNext-aside-box-hover")){K(L(".KyeeNext-main-box"),"KyeeNext-main-box-fixed","KyeeNext-main-box-dynamic");L(".KyeeNext-aside-box").removeClass("KyeeNext-aside-box-hover")}}L("#KyeeNext-menu-items-box").on("click",".KyeeNext-item-level-0",function(){var e=this;L(".KyeeNext-menu-items-box").children(".KyeeNext-item-level-0-expanded").each(function(){if(L(e).parent()[0]!=this){L(this).removeClass("KyeeNext-item-level-0-expanded").addClass("KyeeNext-item-level-0-folded");if(L(this).children("ul").length>0){L(this).children("ul").removeClass("KyeeNext-submenu-show").addClass("KyeeNext-submenu-hide");L(this).children(".KyeeNext-item-level-0").children(".KyeeNext-item-icon-right").removeClass("KyeeNext-item-icon-right-expanded").addClass("KyeeNext-item-icon-right-folded")}}});if(L(this).parent().children("ul").length>0){K(L(this).parent(),"KyeeNext-item-level-0-expanded","KyeeNext-item-level-0-folded");K(L(this).parent().children("ul"),"KyeeNext-submenu-show","KyeeNext-submenu-hide");K(L(this).children(".KyeeNext-item-icon-right"),"KyeeNext-item-icon-right-folded","KyeeNext-item-icon-right-expanded")}if(L(this).hasClass("kyee-router-link-flag")){x({MENU_ID:L(this).attr("id").substring(19),MENU_LABEL:L(this).children("span")[0].innerHTML});d(L(this))}});L("#KyeeNext-menu-items-box").on("click",".KyeeNext-item-level-1",function(){if(L(this).parent().children("ul").length>0){K(L(this).parent().children("ul"),"KyeeNext-submenu-show","KyeeNext-submenu-hide");K(L(this).children("i"),"kyeenext-icon-reduce","kyeenext-icon-add")}if(L(this).hasClass("kyee-router-link-flag")){x({MENU_ID:L(this).attr("id").substring(19),MENU_LABEL:L(this).children("span")[0].innerHTML});d(L(this))}});L("#KyeeNext-menu-items-box").on("click",".KyeeNext-item-level-2",function(){if(L(this).hasClass("kyee-router-link-flag")){x({MENU_ID:L(this).attr("id").substring(19),MENU_LABEL:L(this)[0].innerHTML});d(L(this))}});function d(e){L(".KyeeNext-item-level-1-2-active").removeClass("KyeeNext-item-level-1-2-active");L(".KyeeNext-item-level-0-active").removeClass("KyeeNext-item-level-0-active");if(e.hasClass("KyeeNext-item-level-0")){e.addClass("KyeeNext-item-level-0-active")}else{e.addClass("KyeeNext-item-level-1-2-active")}if(i.platform==0){L("#KyeeNext-workspace-iframe").attr("src",e.attr("data-router-link"))}else if(i.platform==1){i.goToFunc(e.attr("data-router-link"))}}function T(e){if(e instanceof jQuery){var t=e}else if(typeof e=="string"){var t=L("#"+e)}else{var t=L(e)}L(".KyeeNext-item-level-1-2-active").removeClass("KyeeNext-item-level-1-2-active");L(".KyeeNext-item-level-0-active").removeClass("KyeeNext-item-level-0-active");L(".KyeeNext-menu-items-box").children(".KyeeNext-item-level-0-expanded").each(function(){if(this!=t.parents("li[class^='KyeeNext-item-level-0-']")[0]){L(this).removeClass("KyeeNext-item-level-0-expanded").addClass("KyeeNext-item-level-0-folded");if(L(this).children("ul").length>0){L(this).children("ul").removeClass("KyeeNext-submenu-show").addClass("KyeeNext-submenu-hide");L(this).children(".KyeeNext-item-level-0").children(".KyeeNext-item-icon-right").removeClass("KyeeNext-item-icon-right-expanded").addClass("KyeeNext-item-icon-right-folded")}}});if(t.hasClass("KyeeNext-item-level-0")){t.addClass("KyeeNext-item-level-0-active")}else if(t.hasClass("KyeeNext-item-level-1")){t.parents(".KyeeNext-item-level-0-folded").removeClass("KyeeNext-item-level-0-folded").addClass("KyeeNext-item-level-0-expanded").find("i.KyeeNext-item-icon-right").removeClass("KyeeNext-item-icon-right-folded").addClass("KyeeNext-item-icon-right-expanded");t.parents(".KyeeNext-submenu-hide").removeClass("KyeeNext-submenu-hide").addClass("KyeeNext-submenu-show");t.addClass("KyeeNext-item-level-1-2-active")}else if(t.hasClass("KyeeNext-item-level-2")){t.parents(".KyeeNext-item-level-0-folded").removeClass("KyeeNext-item-level-0-folded").addClass("KyeeNext-item-level-0-expanded").find("i.KyeeNext-item-icon-right").removeClass("KyeeNext-item-icon-right-folded").addClass("KyeeNext-item-icon-right-expanded");t.parents(".KyeeNext-submenu-hide").removeClass("KyeeNext-submenu-hide").addClass("KyeeNext-submenu-show");t.parent().prev().children("i").removeClass("kyeenext-icon-add").addClass("kyeenext-icon-reduce");t.addClass("KyeeNext-item-level-1-2-active")}x({MENU_ID:t.attr("id").substring(19),MENU_LABEL:t.children("span")[0]?t.children("span")[0].innerHTML:t[0].innerHTML});if(i.platform==0){L("#KyeeNext-workspace-iframe").attr("src",t.attr("data-router-link"))}else if(i.platform==1){i.goToFunc(t.attr("data-router-link"))}}function x(e){if(!I.SHOW_RECENT_FUNC){return}if(c(a,{MENU_ID:e.MENU_ID})<0){a.push(e);L("#KyeeNext-visited-items").children("li").removeClass("KyeeNext-active-item");var t=L("#KyeeNext-visited-item-temp").clone().attr("id","KyeeNext-visited-item-"+e.MENU_ID).css("display","inline-block");t.children("span")[0].innerHTML=e.MENU_LABEL;t.appendTo(L("#KyeeNext-visited-items"))}else if(!L("#KyeeNext-visited-item-"+e.MENU_ID).hasClass("KyeeNext-active-item")){L("#KyeeNext-visited-items").children("li").removeClass("KyeeNext-active-item");L("#KyeeNext-visited-item-"+e.MENU_ID).addClass("KyeeNext-active-item")}y(L("#KyeeNext-visited-item-"+e.MENU_ID)[0])}function m(e,t){var i=c(a,{MENU_ID:e});var s;if(t.hasClass("KyeeNext-active-item")){if(i==a.length-1&&a.length>1){L("#KyeeNext-visited-item-"+a[i-1].MENU_ID).addClass("KyeeNext-active-item");s=L("#KyeeNext-menu-item-"+a[i-1].MENU_ID);T(s)}else if(i==0&&a.length==1){L(".KyeeNext-item-level-1-2-active").removeClass("KyeeNext-item-level-1-2-active")}else if(i<a.length-1){L("#KyeeNext-visited-item-"+a[i+1].MENU_ID).addClass("KyeeNext-active-item");s=L("#KyeeNext-menu-item-"+a[i+1].MENU_ID);T(s)}}else{s=L("#KyeeNext-visited-items>.KyeeNext-active-item")}if(i>-1){a.splice(i,1);s&&y(s)}}function c(e,t,i){i!==false&&(i=true);for(var s in e){s=+s;var a=e[s];if(t instanceof Object){var n=true;for(var l in t){var r=t[l];if(a[l]==r&&!i)return s;if(i&&a[l]!=r){n=false;break}}if(n)return s}else{if(a==t){return s}}}return-1}function y(e){if(e instanceof jQuery){e=e[0]}var t=e.offsetLeft;var i=e.offsetWidth;var s=L("#KyeeNext-visited-items");var a=s.css("transform")&&s.css("transform")!=="none"?+s.css("transform").substring(7).split(",")[4]:0;var n=s.outerWidth();if(t>=-a&&t+i<=n-a){}else if(t<-a){s.css({transform:"translateX("+(60-t<0?60-t:0)+"px)"})}else if(t+i>n-a){s.css({transform:"translateX("+(n-t-i-80<0?n-t-i-80:0)+"px)"})}}L("#KyeeNext-visited-items").on("click","li",function(){var e=L(this).attr("id").substring(22);var t="KyeeNext-menu-item-"+e;if(!L("#"+t).hasClass("KyeeNext-item-level-1-2-active")){T(t)}});L("#KyeeNext-visited-items").on("click","li>i",function(e){L(this).parent().remove();m(L(this).parent().attr("id").substring(22),L(this).parent());e.stopPropagation()});L(".KyeeNext-nav-pre").on("click",function(){var e=L("#KyeeNext-visited-items");var t=e.css("transform")&&e.css("transform")!=="none"?+e.css("transform").substring(7).split(",")[4]:0;var i=e.outerWidth();var s=v();if(t>i-s){e.css({transform:"translateX("+(t-I.SCROLL_STEP)+"px)"})}});L(".KyeeNext-nav-next").on("click",function(){var e=L("#KyeeNext-visited-items");var t=e.css("transform")&&e.css("transform")!=="none"?+e.css("transform").substring(7).split(",")[4]:0;if(t<0){e.css({transform:"translateX("+(t+I.SCROLL_STEP<=0?t+I.SCROLL_STEP:0)+"px)"})}});function v(){var e=0;var t=L("#KyeeNext-visited-items>li");for(var i=0,s=t.length;i<s;i++){e+=t[i].offsetWidth}return e}L("#KyeeNext-customer-services-toggle-btn").on("click",function(){L(this).toggleClass("KyeeNext-customer-services-expanded");L(".KyeeNext-customer-services-item:not(#KyeeNext-customer-services-item-temp)").fadeToggle("fast");K(L(this).children("i"),"kyeenext-icon-add","kyeenext-icon-reduce")});L(".KyeeNext-ui-sidebar-mask").on("click",function(){L(".KyeeNext-sidebar-right").removeClass("KyeeNext-sidebar-show").addClass("KyeeNext-sidebar-hidden");L(".KyeeNext-ui-sidebar-mask").fadeOut(200)});function K(e,t,i){if(e.hasClass(t)){e.removeClass(t).addClass(i)}else if(e.hasClass(i)){e.removeClass(i).addClass(t)}}function g(e,t,i){if(i&&i.length>0){for(var s=0,a=i.length;s<a;s++){L("#"+e).on(i[s].EVENT_NAME,"#"+t,i[s].EVENT_FUNC)}}}return{init:t,expandedTarget:T}}})})(jQuery);